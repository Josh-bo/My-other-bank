<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogIn Pagee</title>
    <link rel="stylesheet" href="bootstrap-5.2.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="signUp.css">
    <link rel="stylesheet" href="phone2.css" media="(max-width:568px)">
    <link rel="stylesheet" href="phone.css" media="(max-width:600px)">
    <link rel="stylesheet" href="Tablet.css" media="(min-width:610px) and (max-width:768px)">
    <link rel="stylesheet" href="tab2.css" media="(min-width:769px) and (max-width:1150px)">
    <link rel="stylesheet" href="res.css" media="(min-width:411px) and (max-width:823px)">
    <link rel="stylesheet" href="ress.css" media="(min-width:360px) and (max-width:640px)">
    <link rel="stylesheet" href="fold.css" media="(min-width:280px) and (max-width:653px)">

</head>
<body>
    <div class="container">
        <div class="row">
            <div class="parent col-12 mt-5 shadow-lg mx-auto rounded ps-5 pt-4">
                <!-- DESIGNS -->
                <div class="child">
                    <div class="sign"><b class="fs-5">LOG IN</b></div>
                    <div class="sign"><b class="fs-5"><a href="signUp1.html" class="text-secondary">SIGN IN</a></b></div>
                </div>

               <div class="row">
                    <div class="col-4 mer mx-auto my-4">
                        <div class="round text-center fs-4 text-light"><b class="">1</b></div>
                    </div>
               </div>

                <!-- INPUTS -->

                <div id="error" class="text-center"></div>
               <div class="row">
                <div class="pe-5 my-2">
                    <legend>E-MAIL</legend>
                    <input class="form-control" type="email" id="em">
                </div>

                <div class="pe-5 my-2">
                    <legend>PASSWORD</legend>
                    <input class="form-control" type="password" id="ps">
                </div>

                <div id="errors" class="text-center"></div>

                    <div class="pe-5 my-2">
                        <button class="btn btt w-100 text-light" onclick="login()">NEXT</button>

                        <button class="btn bnt btn-danger my-2 w-100 text-light" onclick="previous4()">PREVIOUS</button>
                   </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let collectback = JSON.parse(localStorage.getItem("EveryUsersDetails2"))
        const login = () => {
            let mail = em.value;
            let pass = ps.value
            let found = false;

            if(em.value == "" || pass.value == ""){
                error.innerHTML = `
                   <b class="text-danger" style="font-size:18px;"> Fill in the form correctly </b>`

                errors.innerHTML = `
                   <b class="text-danger" style="font-size:18px;"> Fill in the form correctly </b>`

                   setTimeout(() => {
                    error.innerHTML = ""                    
                    errors.innerHTML = ""                    
                }, 2000);
            }else{
                let newthings = collectback.find((eachUser, i) => {
                    localStorage.setItem('currentUser', i)
                    return eachUser.emails == mail && eachUser.password == pass
                    
                })

                    if(newthings == undefined) {
                    error.innerHTML = `
                    <b class="text-danger" style="font-size:25px;">Incorrect Details</b>`

                    errors.innerHTML = `
                    <b class="text-danger" style="font-size:25px;">Incorrect Details</b>`
                    
                    setTimeout(() => {
                        error.innerHTML = ""                    
                        errors.innerHTML = ""                    
                    }, 3000);
                    
                }else{
                    window.location = `dashboard.html`
                    // alert("Window")
                }
            }
        }

        const previous4 = () => {
            window.location = `SignUp3.html`
        }
    </script>
</body>
</html>