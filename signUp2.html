<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp2 Page</title>
    <link rel="stylesheet" href="bootstrap-5.2.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="signUp.css">
    <link rel="stylesheet" href="phone2.css" media="(max-width:568px)">
    <link rel="stylesheet" href="phone.css" media="(max-width:600px)">
    <link rel="stylesheet" href="Tablet.css" media="(min-width:610px) and (max-width:768px)">
    <link rel="stylesheet" href="tab2.css" media="(min-width:769px) and (max-width:1150px)">
    <link rel="stylesheet" href="res.css" media="(min-width:411px) and (max-width:823px)">
    <link rel="stylesheet" href="ress.css" media="(min-width:360px) and (max-width:640px)">
    <link rel="stylesheet" href="fold.css" media="(min-width:280px) and (max-width:653px)">

</head>
<body>
    <div class="container">
        <div class="row">
            <div class="parent col-12 mt-5 shadow-lg mx-auto rounded ps-5 pt-4 mb-5">
                <!-- DESIGNS -->
                <div class="child">
                    <div class="sign"><b class="fs-5">SIGN UP</b></div>
                    <div class="sign"><b class="fs-5"><a href="logIn.html" class="text-secondary">LOG IN</a></b></div>
                </div>

                <div class="rounded-con my-4">
                    <div class="round text-center fs-4 text-light bg-secondary" onclick="one()"><b class="">1</b></div>

                    <div class="border"></div>

                    <div class="round text-center fs-4 text-light "><b class="">2</b>
                    </div>

                    <div class="border"></div>

                    <div class="round text-center fs-4 text-light bg-secondary" onclick="three()"><b class="">3</b></div>
                </div>

                <!-- INPUTS -->
                <div id="error" class="text-center"></div>

               <div class="row">
                    <div class="pe-5 my-2">
                        <legend>E-MAIL</legend>
                        <input class="form-control" type="email" id="em" onblur="lon()">
                        <div id="emdisp"></div>
                    </div>

                    <div class="pe-5 my-2">
                        <legend>PHONE NUMBER</legend>
                        <input class="form-control" type="text" maxlength="11" id="ph" placeholder="" onblur="phones()">
                        <div id="phdisp"></div>
                    </div>

                    <div class="pe-5 my-2">
                        <legend>PASSWORD</legend>
                        <input class="form-control" type="text" id="ps" onblur="password()">
                        <div id="passdisp"></div>
                    </div>

                    <div class="pe-5 my-2">
                        <legend>GENDER</legend>
                        <select class="form-control  gen" id="gd">
                            <option value="" class="bgg"> </option>
                            <option value="MALE" class="bgg">MALE</option>
                            <option value="FEMALE" class="bgg">FEMALE</option>
                        </select>
                        <!-- <input type="text" class="form-control" id="gd"> -->
                    </div>

                    <div id="errors" class="text-center"></div>

                    <div class="pe-5 my-2">
                        <button class="btn btt w-100 text-light" onclick="next2()">NEXT</button>

                        <button class="btn bnt btn-danger my-2 w-100 text-light" onclick="previous2()">PREVIOUS</button>
                   </div>
                </div>
            </div>
        </div>
    </div>

    <script>
          let allUsersDetails = []
        if(localStorage.EveryUsersDetails2){
            let oldData = JSON.parse(localStorage.getItem("EveryUsersDetails2"))
            allUsersDetails = oldData
        }

        const next2 = () => {
   
            
            if(em.value == "" || ph.value == "" || ps.value == ""){
                error.innerHTML = `<h5 class="text-danger">Fill in the form correctly </h5>`
                errors.innerHTML = `<h5 class="text-danger">Fill in the form correctly </h5>`

                setTimeout(() => {
                    error.innerHTML = ""
                    errors.innerHTML = ""
                }, 2000);

            }else {
                let eachUsersDetails = {
                    emails : em.value,
                    phoneNumber : ph.value,
                    password : ps.value,
                    gender : gd.value,
                }
                allUsersDetails.push(eachUsersDetails)
                console.log(allUsersDetails)
                localStorage.setItem('EveryUsersDetails2', JSON.stringify(allUsersDetails))  
                
                window.location = `signUp3.html`
            }  
        }
        const lon = () => {
            let regmail =  /^([a-zA-Z0-9]+)@([a-zA-Z0-9]+)\.([a-zA-Z]{2,})(\.[a-zA-Z]+)?$/
            if(!regmail.test(em.value)){
                emdisp.innerHTML = `Invalid mail`
                emdisp.className = `text-danger`
                em.className = `form-control is-invalid`
            }else{
                emdisp.innerHTML = `Correct mail`
                emdisp.className = `text-success`
                em.className = `form-control is-valid`
            }
        }

        const phones = () => {
            let regPhone = /^(?:(?:\+|00)[1-9]|0)[1-9][0-9]{8,11}$/

            if(!regPhone.test(ph.value)){
                phdisp.innerHTML = `Invalid Phone Number`
                phdisp.className = `text-danger`
                ph.className = `form-control is-invalid`
            }else{
                phdisp.innerHTML = `Correct Phone Number`
                phdisp.className = `text-success`
                ph.className = `form-control is-valid`
            }
        }

        const password = () => {
            let regpass = /^.{5,}$/

            if(!regpass.test(ps.value)){
                passdisp.innerHTML = `Invalid Password`
                passdisp.className = `text-danger`
                ps.className = `form-control is-invalid`
            }else{
                passdisp.innerHTML = `Correct Password`
                passdisp.className = `text-success`
                ps.className = `form-control is-valid`
            }
        }

         const one = () => {
            window.location = `signUp1.html`
        }

        const three = () => {
            window.location = `signUp3.html`
        }  
    
        const previous2 = () => {
            window.location = `SignUp1.html`
        }
    </script>
</body>
</html>